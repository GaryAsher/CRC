<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#0f0f0f" />
		<meta name="robots" content="index, follow" />
		<meta property="og:site_name" content="Challenge Run Community" />
		<meta property="og:type" content="website" />
		<link rel="icon" href="%sveltekit.assets%/img/favicon.png" />
		<link rel="alternate" type="application/rss+xml" title="CRC News" href="/feed.xml" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&family=Poppins:wght@400;500;600;700&family=Montserrat:wght@400;500;600;700&family=Nunito:wght@400;600;700&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet" />
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<script>
			// Apply custom theme from localStorage BEFORE first paint to prevent flash
			try {
				var t = localStorage.getItem('crc-custom-theme');
				if (t) {
					var d = JSON.parse(t), s = document.documentElement.style;
					if (d.accentColor) {
						s.setProperty('--accent', d.accentColor);
						var m = d.accentColor.replace('#','').match(/^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);
						if (m) {
							var rgb = parseInt(m[1],16)+', '+parseInt(m[2],16)+', '+parseInt(m[3],16);
							s.setProperty('--accent-rgb', rgb);
							s.setProperty('--focus', 'rgba('+rgb+', 0.6)');
							s.setProperty('--focus-2', 'rgba('+rgb+', 0.35)');
						}
					}
					if (d.bgColor) s.setProperty('--bg', d.bgColor);
					if (d.surfaceColor) s.setProperty('--surface', d.surfaceColor);
					if (d.fontFamily && d.fontFamily !== 'system') {
						var fonts = { inter: "'Inter', sans-serif", roboto: "'Roboto', sans-serif", poppins: "'Poppins', sans-serif", montserrat: "'Montserrat', sans-serif", nunito: "'Nunito', sans-serif", ubuntu: "'Ubuntu', sans-serif" };
						if (fonts[d.fontFamily]) s.setProperty('--font-family', fonts[d.fontFamily]);
					}
					if (d.textOutline && d.textOutline !== 'none') {
						var sh = d.textOutline === 'light' ? '0 0 4px rgba(255,255,255,0.8), 0 0 2px rgba(255,255,255,0.6)' : '0 0 4px rgba(0,0,0,0.8), 0 0 2px rgba(0,0,0,0.6)';
						s.setProperty('--text-outline', sh);
					}
					if (d.bgImageUrl) {
						s.setProperty('--bg-image', "url('"+d.bgImageUrl+"')");
						s.setProperty('--bg-image-opacity', String((d.bgOpacity||15)/100));
					}
				}
			} catch(e) {}
		</script>
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
